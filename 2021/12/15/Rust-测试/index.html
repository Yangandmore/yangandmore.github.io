<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rust-测试 | 杨小杨的博客</title>
  <meta name="keywords" content=" rust ">
  <meta name="description" content="Rust-测试 | 杨小杨的博客">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="静态工厂">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式-静态工厂">
<meta property="og:url" content="http://example.com/2023/01/31/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F2/index.html">
<meta property="og:site_name" content="杨小杨的博客">
<meta property="og:description" content="静态工厂">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/DesignPatterns/1.png">
<meta property="article:published_time" content="2023-01-31T15:55:25.000Z">
<meta property="article:modified_time" content="2023-01-31T14:41:00.507Z">
<meta property="article:author" content="Yang">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/DesignPatterns/1.png">


<link rel="icon" href="/img/header.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="杨小杨的博客" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/header.png"/>
</a>
<div class="author">
    <span>Yang</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/Yangandmore"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:635408602@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=635408602&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(152)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="数据库">
                        
                        数据库
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="包管理">
                        
                        包管理
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="编译的库">
                        
                        编译的库
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="分布式事务">
                        
                        分布式事务
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="分布式搜索">
                        
                        分布式搜索
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="后台">
                        
                        后台
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="机器学习">
                        
                        机器学习
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="快捷键">
                        
                        快捷键
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="流程引擎">
                        
                        流程引擎
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="设计模式">
                        
                        设计模式
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="数据结构">
                        <i class="fold iconfont icon-right"></i>
                        
                        数据结构
                        <small>(2)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="数据结构<--->算法分析">
                                        
                                        算法分析
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="异常问题">
                        
                        异常问题
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="音视频">
                        
                        音视频
                        <small>(13)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="整洁代码">
                        
                        整洁代码
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="正则表达式">
                        
                        正则表达式
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Android">
                        <i class="fold iconfont icon-right"></i>
                        
                        Android
                        <small>(17)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Android<--->热更新">
                                        
                                        热更新
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="C/C++">
                        
                        C/C++
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="git">
                        
                        git
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Gradle">
                        
                        Gradle
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="java">
                        
                        java
                        <small>(9)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="JavaScript">
                        <i class="fold iconfont icon-right"></i>
                        
                        JavaScript
                        <small>(2)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="JavaScript<--->npm">
                                        
                                        npm
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="ReactNative">
                        
                        ReactNative
                        <small>(10)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Redis">
                        
                        Redis
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="rust">
                        <i class="fold iconfont icon-right"></i>
                        
                        rust
                        <small>(46)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="rust<--->p2p">
                                        
                                        p2p
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="spring">
                        <i class="fold iconfont icon-right"></i>
                        
                        spring
                        <small>(9)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="spring<--->java">
                                        
                                        java
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="ssr">
                        
                        ssr
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="152">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>包管理</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>贝塞尔曲线</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分布式事务</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分布式搜索</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>构建工具</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>后台</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>汇编</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>机器学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>跨域</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>快捷键</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>流程引擎</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>热更新</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>设计模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>视频格式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据结构与算法分析</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图片格式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>异步</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>异常问题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>音频</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>音视频</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>整洁代码</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>正则表达式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>直播</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>android</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Android</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>camera</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Cpp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>es</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ffmpeg</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Gradle</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>javaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>libfaac</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>libjpeg-turbo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>libx264</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>libyuv</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NDK</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>react</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>React</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ReactNative</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RTMP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>rust</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>seate</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>spring</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>springboot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>srs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ssr</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class="All 设计模式 "
           href="/2023/01/31/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F2/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="设计模式-静态工厂">设计模式-静态工厂</span>
            <span class="post-date" title="2023-01-31 15:55:25">2023/01/31</span>
        </a>
        
        <a  class="All 快捷键 "
           href="/2023/01/28/idea%E5%BF%AB%E6%8D%B7%E9%94%AE/"
           data-tag="快捷键"
           data-author="" >
            <span class="post-title" title="idea快捷键(mac)-持续更新">idea快捷键(mac)-持续更新</span>
            <span class="post-date" title="2023-01-28 08:02:25">2023/01/28</span>
        </a>
        
        <a  class="All 设计模式 "
           href="/2023/01/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F1/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="设计模式-工厂方法">设计模式-工厂方法</span>
            <span class="post-date" title="2023-01-28 08:02:25">2023/01/28</span>
        </a>
        
        <a  class="All 整洁代码 "
           href="/2023/01/28/%E9%87%8D%E6%9E%84%E4%BB%A3%E7%A0%811/"
           data-tag="整洁代码"
           data-author="" >
            <span class="post-title" title="观看Clean Code(整洁代码)记录-1">观看Clean Code(整洁代码)记录-1</span>
            <span class="post-date" title="2023-01-28 08:02:25">2023/01/28</span>
        </a>
        
        <a  class="All 异常问题 "
           href="/2022/09/27/eclipse-mac-err/"
           data-tag="异常问题"
           data-author="" >
            <span class="post-title" title="eclipse-mac-err">eclipse-mac-err</span>
            <span class="post-date" title="2022-09-27 22:24:54">2022/09/27</span>
        </a>
        
        <a  class="All 流程引擎 "
           href="/2022/09/16/activiti7/"
           data-tag="流程引擎"
           data-author="" >
            <span class="post-title" title="流程引擎-activiti7">流程引擎-activiti7</span>
            <span class="post-date" title="2022-09-16 10:01:11">2022/09/16</span>
        </a>
        
        <a  class="All 分布式事务 "
           href="/2022/09/04/seate/"
           data-tag="seate,分布式事务"
           data-author="" >
            <span class="post-title" title="配置seate">配置seate</span>
            <span class="post-date" title="2022-09-04 19:11:24">2022/09/04</span>
        </a>
        
        <a  class="All 分布式搜索 "
           href="/2022/09/01/es-java/"
           data-tag="es,分布式搜索"
           data-author="" >
            <span class="post-title" title="es在java环境中使用">es在java环境中使用</span>
            <span class="post-date" title="2022-09-01 22:11:48">2022/09/01</span>
        </a>
        
        <a  class="All 分布式搜索 "
           href="/2022/09/01/es-ik/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="es配置ik分词器及热更新">es配置ik分词器及热更新</span>
            <span class="post-date" title="2022-09-01 16:38:27">2022/09/01</span>
        </a>
        
        <a  class="All 分布式搜索 "
           href="/2022/08/06/es-7-change-password/"
           data-tag="es,分布式搜索"
           data-author="" >
            <span class="post-title" title="es修改密码">es修改密码</span>
            <span class="post-date" title="2022-08-06 23:37:16">2022/08/06</span>
        </a>
        
        <a  class="All 分布式搜索 "
           href="/2022/08/06/es-linux/"
           data-tag="es,分布式搜索"
           data-author="" >
            <span class="post-title" title="elk在linux上简单安装">elk在linux上简单安装</span>
            <span class="post-date" title="2022-08-06 21:02:25">2022/08/06</span>
        </a>
        
        <a  class="All 分布式搜索 "
           href="/2022/08/02/ELK/"
           data-tag="es,分布式搜索"
           data-author="" >
            <span class="post-title" title="ELK学习">ELK学习</span>
            <span class="post-date" title="2022-08-02 15:13:44">2022/08/02</span>
        </a>
        
        <a  class="All 包管理 "
           href="/2022/07/29/chocolatey/"
           data-tag="包管理"
           data-author="" >
            <span class="post-title" title="chocolatey">chocolatey</span>
            <span class="post-date" title="2022-07-29 16:56:39">2022/07/29</span>
        </a>
        
        <a  class="All spring "
           href="/2022/07/28/Spring-%E5%9F%BA%E7%A1%805/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-基础5">Spring-基础5</span>
            <span class="post-date" title="2022-07-28 21:11:57">2022/07/28</span>
        </a>
        
        <a  class="All spring "
           href="/2022/07/28/Spring-%E5%9F%BA%E7%A1%804/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-基础(四)">Spring-基础(四)</span>
            <span class="post-date" title="2022-07-28 15:50:59">2022/07/28</span>
        </a>
        
        <a  class="All spring "
           href="/2022/07/25/Spring-%E5%9F%BA%E7%A1%803/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-基础(三)">Spring-基础(三)</span>
            <span class="post-date" title="2022-07-25 21:51:47">2022/07/25</span>
        </a>
        
        <a  class="All spring "
           href="/2022/07/25/Spring-%E5%9F%BA%E7%A1%802/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-基础(二)">Spring-基础(二)</span>
            <span class="post-date" title="2022-07-25 10:26:06">2022/07/25</span>
        </a>
        
        <a  class="All spring "
           href="/2022/07/25/Spring-%E5%9F%BA%E7%A1%801/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-基础(一)">Spring-基础(一)</span>
            <span class="post-date" title="2022-07-25 09:58:25">2022/07/25</span>
        </a>
        
        <a  class="All rust "
           href="/2022/07/17/P2P/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="P2P">P2P</span>
            <span class="post-date" title="2022-07-17 10:46:24">2022/07/17</span>
        </a>
        
        <a  class="All rust p2p "
           href="/2022/07/16/Rust-libp2p/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-libp2p">Rust-libp2p</span>
            <span class="post-date" title="2022-07-16 14:04:11">2022/07/16</span>
        </a>
        
        <a  class="All "
           href="/2022/07/06/%E5%8C%BA%E5%9D%97%E9%93%BE-%E8%AE%B0%E8%B4%A6%E6%A8%A1%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="区块链-记账模式">区块链-记账模式</span>
            <span class="post-date" title="2022-07-06 21:48:04">2022/07/06</span>
        </a>
        
        <a  class="All rust "
           href="/2022/06/26/Summer-boot%E4%B8%80%E6%9C%9F%E5%AE%8F%E9%83%A8%E5%88%86%E6%9E%84%E6%80%9D%E5%8F%8A%E5%AE%9E%E7%8E%B0/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Summer-boot一期宏部分构思及实现">Summer-boot一期宏部分构思及实现</span>
            <span class="post-date" title="2022-06-26 10:12:27">2022/06/26</span>
        </a>
        
        <a  class="All git "
           href="/2022/06/16/Git-fork%E9%A1%B9%E7%9B%AE%E6%9B%B4%E6%96%B0/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="Git-fork项目更新">Git-fork项目更新</span>
            <span class="post-date" title="2022-06-16 15:11:56">2022/06/16</span>
        </a>
        
        <a  class="All rust "
           href="/2022/06/12/Rust-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-编码规范">Rust-编码规范</span>
            <span class="post-date" title="2022-06-12 09:05:33">2022/06/12</span>
        </a>
        
        <a  class="All 数据库 "
           href="/2022/05/29/MySql-Some%E7%AD%89%E6%8C%87%E4%BB%A4/"
           data-tag="SQL"
           data-author="" >
            <span class="post-title" title="MySql_Some、Any、All的用法">MySql_Some、Any、All的用法</span>
            <span class="post-date" title="2022-05-29 10:07:14">2022/05/29</span>
        </a>
        
        <a  class="All Redis "
           href="/2022/05/12/Redis-%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis-聚合操作">Redis-聚合操作</span>
            <span class="post-date" title="2022-05-12 14:34:47">2022/05/12</span>
        </a>
        
        <a  class="All Redis "
           href="/2022/05/11/Redis-%E5%88%87%E7%89%87%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis-切片集群配置">Redis-切片集群配置</span>
            <span class="post-date" title="2022-05-11 15:45:38">2022/05/11</span>
        </a>
        
        <a  class="All Redis "
           href="/2022/05/10/Redis-%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6%E9%85%8D%E7%BD%AE/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis-哨兵机制配置">Redis-哨兵机制配置</span>
            <span class="post-date" title="2022-05-10 17:02:25">2022/05/10</span>
        </a>
        
        <a  class="All Redis "
           href="/2022/05/10/Redis-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%85%B3/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis-开启远程访问">Redis-开启远程访问</span>
            <span class="post-date" title="2022-05-10 14:24:32">2022/05/10</span>
        </a>
        
        <a  class="All rust "
           href="/2022/05/06/Rust-%E5%B1%9E%E6%80%A7/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-属性">Rust-属性</span>
            <span class="post-date" title="2022-05-06 10:08:24">2022/05/06</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/20/Rust-build/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust编译过程图">Rust编译过程图</span>
            <span class="post-date" title="2022-04-20 14:54:46">2022/04/20</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/08/Rust-Atomic/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-Atomic">Rust-Atomic</span>
            <span class="post-date" title="2022-04-08 09:55:50">2022/04/08</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/06/Rust-%E6%AD%BB%E7%81%B5%E6%9C%AF3/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-死灵术3">Rust-死灵术3</span>
            <span class="post-date" title="2022-04-06 20:48:19">2022/04/06</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/06/Rust-%E6%AD%BB%E7%81%B5%E6%9C%AF2/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-死灵术2">Rust-死灵术2</span>
            <span class="post-date" title="2022-04-06 14:54:22">2022/04/06</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/02/Rust-AnyTrait/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-AnyTrait">Rust-AnyTrait</span>
            <span class="post-date" title="2022-04-02 14:25:05">2022/04/02</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/02/Rust-Cow%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-Cow智能指针">Rust-Cow智能指针</span>
            <span class="post-date" title="2022-04-02 10:16:00">2022/04/02</span>
        </a>
        
        <a  class="All rust "
           href="/2022/04/01/Rust-%E6%AD%BB%E7%81%B5%E6%9C%AF/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-死灵书（一）">Rust-死灵书（一）</span>
            <span class="post-date" title="2022-04-01 16:42:36">2022/04/01</span>
        </a>
        
        <a  class="All rust "
           href="/2022/03/09/Rust-%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-参考手册">Rust-参考手册</span>
            <span class="post-date" title="2022-03-09 10:15:21">2022/03/09</span>
        </a>
        
        <a  class="All rust "
           href="/2022/03/08/Rust-%E5%AE%8F/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-小宏书(声明宏)">Rust-高级-小宏书(声明宏)</span>
            <span class="post-date" title="2022-03-08 20:22:51">2022/03/08</span>
        </a>
        
        <a  class="All Android "
           href="/2022/03/03/Android%E9%9B%86%E6%88%90Rust/"
           data-tag="Android,rust"
           data-author="" >
            <span class="post-title" title="Android集成Rust">Android集成Rust</span>
            <span class="post-date" title="2022-03-03 10:56:49">2022/03/03</span>
        </a>
        
        <a  class="All rust "
           href="/2022/02/08/Rust-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-类型转换-From &amp; Into">Rust-类型转换-From &amp; Into</span>
            <span class="post-date" title="2022-02-08 16:53:33">2022/02/08</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/16/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Bbitflags/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之bitflags">Rust-高级-Crate之bitflags</span>
            <span class="post-date" title="2022-01-16 22:36:28">2022/01/16</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Brayon/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之rayon">Rust-高级-Crate之rayon</span>
            <span class="post-date" title="2022-01-12 21:55:30">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Blazy-static/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之lazy_static">Rust-高级-Crate之lazy_static</span>
            <span class="post-date" title="2022-01-12 21:50:32">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8BWalkdir/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之Walkdir">Rust-高级-Crate之Walkdir</span>
            <span class="post-date" title="2022-01-12 21:50:15">2022/01/12</span>
        </a>
        
        <a  class="All "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Bthreadpool/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之threadpool">Rust-高级-Crate之threadpool</span>
            <span class="post-date" title="2022-01-12 21:49:50">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Berror-chain/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之error_chain">Rust-高级-Crate之error_chain</span>
            <span class="post-date" title="2022-01-12 21:49:39">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Bcrossbeam/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之crossbeam">Rust-高级-Crate之crossbeam</span>
            <span class="post-date" title="2022-01-12 21:16:24">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/12/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Btar/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之tar">Rust-高级-Crate之tar</span>
            <span class="post-date" title="2022-01-12 10:29:50">2022/01/12</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/11/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Brand/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之rand">Rust-高级-Crate之rand</span>
            <span class="post-date" title="2022-01-11 14:52:45">2022/01/11</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/09/Rust-%E9%AB%98%E7%BA%A7-Crate%E4%B9%8Bserde/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级-Crate之serde">Rust-高级-Crate之serde</span>
            <span class="post-date" title="2022-01-09 21:10:52">2022/01/09</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/09/Rust%E4%B8%AD%E7%9A%84%E5%BC%95%E7%94%A8%E4%B8%8E%E5%80%9F%E7%94%A8/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust中的引用与借用">Rust中的引用与借用</span>
            <span class="post-date" title="2022-01-09 19:03:47">2022/01/09</span>
        </a>
        
        <a  class="All "
           href="/2022/01/09/graphQL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="graphQL">graphQL</span>
            <span class="post-date" title="2022-01-09 17:02:35">2022/01/09</span>
        </a>
        
        <a  class="All "
           href="/2022/01/05/Rust-%E9%AB%98%E7%BA%A7-%E6%9C%8D%E5%8A%A1%E4%B9%8BActix/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Rust-高级-服务之Actix">Rust-高级-服务之Actix</span>
            <span class="post-date" title="2022-01-05 21:13:56">2022/01/05</span>
        </a>
        
        <a  class="All rust "
           href="/2022/01/05/Rust-%E9%AB%98%E7%BA%A7-%E5%BC%82%E6%AD%A5%E4%B9%8Bfutures/"
           data-tag="rust,异步"
           data-author="" >
            <span class="post-title" title="Rust-高级-异步之futures">Rust-高级-异步之futures</span>
            <span class="post-date" title="2022-01-05 21:13:38">2022/01/05</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/30/Rust-%E6%9C%80%E5%90%8E%E7%9A%84%E9%A1%B9%E7%9B%AE/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-最后的项目">Rust-最后的项目</span>
            <span class="post-date" title="2021-12-30 14:46:33">2021/12/30</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/21/Rust-%E9%AB%98%E7%BA%A7%E7%89%B9%E5%BE%81/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-高级特征">Rust-高级特征</span>
            <span class="post-date" title="2021-12-21 22:22:15">2021/12/21</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/20/Rust-%E6%A8%A1%E5%BC%8F%E7%94%A8%E6%9D%A5%E5%8C%B9%E9%85%8D%E5%80%BC%E7%9A%84%E7%BB%93%E6%9E%84/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-模式与模式匹配">Rust-模式与模式匹配</span>
            <span class="post-date" title="2021-12-20 20:53:44">2021/12/20</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/20/Rust-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-面向对象">Rust-面向对象</span>
            <span class="post-date" title="2021-12-20 15:15:04">2021/12/20</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/20/Rust-%E6%97%A0%E7%95%8F%E5%B9%B6%E5%8F%91/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-无畏并发">Rust-无畏并发</span>
            <span class="post-date" title="2021-12-20 09:44:35">2021/12/20</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/19/Rust-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-智能指针">Rust-智能指针</span>
            <span class="post-date" title="2021-12-19 10:23:23">2021/12/19</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/16/Rust-CargoAndCratesIO/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-CargoAndCratesIO">Rust-CargoAndCratesIO</span>
            <span class="post-date" title="2021-12-16 22:52:05">2021/12/16</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/16/Rust-%E5%87%BD%E6%95%B0%E5%BC%8F%E8%AF%AD%E8%A8%80%E5%8A%9F%E8%83%BD-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E9%97%AD%E5%8C%85/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-函数式语言功能:迭代器与闭包">Rust-函数式语言功能:迭代器与闭包</span>
            <span class="post-date" title="2021-12-16 16:08:22">2021/12/16</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/15/Rust-%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-IO">Rust-IO</span>
            <span class="post-date" title="2021-12-15 17:07:26">2021/12/15</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/15/Rust-%E6%B5%8B%E8%AF%95/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-测试">Rust-测试</span>
            <span class="post-date" title="2021-12-15 14:08:29">2021/12/15</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/14/Rust-%E6%B3%9B%E5%9E%8B%E3%80%81trait%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-泛型、trait和生命周期">Rust-泛型、trait和生命周期</span>
            <span class="post-date" title="2021-12-14 20:57:17">2021/12/14</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/14/Rust-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-错误处理">Rust-错误处理</span>
            <span class="post-date" title="2021-12-14 10:48:51">2021/12/14</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/13/Rust-%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-常见集合">Rust-常见集合</span>
            <span class="post-date" title="2021-12-13 20:55:23">2021/12/13</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/13/Rust-%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97%E7%BB%84%E7%BB%87%E5%92%8C%E5%A4%8D%E7%94%A8%E4%BB%A3%E7%A0%81/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-使用模块组织和复用代码">Rust-使用模块组织和复用代码</span>
            <span class="post-date" title="2021-12-13 16:26:05">2021/12/13</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/13/Rust-%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-枚举和模式匹配">Rust-枚举和模式匹配</span>
            <span class="post-date" title="2021-12-13 10:44:04">2021/12/13</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/12/Rust-%E7%BB%93%E6%9E%84%E4%BD%93/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-结构体">Rust-结构体</span>
            <span class="post-date" title="2021-12-12 22:42:42">2021/12/12</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/12/Rust-%E6%89%80%E6%9C%89%E6%9D%83/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-所有权">Rust-所有权</span>
            <span class="post-date" title="2021-12-12 11:32:16">2021/12/12</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/11/Rust-%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-基础技术">Rust-基础技术</span>
            <span class="post-date" title="2021-12-11 20:25:09">2021/12/11</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/11/Rust-%E7%BC%96%E7%A8%8B%E7%8C%9C%E8%B0%9C%E6%B8%B8%E6%88%8F/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-编程猜谜游戏">Rust-编程猜谜游戏</span>
            <span class="post-date" title="2021-12-11 18:58:04">2021/12/11</span>
        </a>
        
        <a  class="All rust "
           href="/2021/12/10/Rust-%E5%85%A5%E9%97%A8/"
           data-tag="rust"
           data-author="" >
            <span class="post-title" title="Rust-入门">Rust-入门</span>
            <span class="post-date" title="2021-12-10 11:18:25">2021/12/10</span>
        </a>
        
        <a  class="All java "
           href="/2021/12/10/Java-%E5%86%85%E9%83%A8%E7%B1%BB/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="Java-内部类">Java-内部类</span>
            <span class="post-date" title="2021-12-10 08:50:32">2021/12/10</span>
        </a>
        
        <a  class="All java "
           href="/2021/12/09/Java-%E6%8E%A5%E5%8F%A3/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="Java-接口">Java-接口</span>
            <span class="post-date" title="2021-12-09 14:54:05">2021/12/09</span>
        </a>
        
        <a  class="All java "
           href="/2021/12/09/Java-%E5%A4%9A%E6%80%81/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="Java-多态">Java-多态</span>
            <span class="post-date" title="2021-12-09 08:42:47">2021/12/09</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/23/JavaNIO/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="JavaNIO">JavaNIO</span>
            <span class="post-date" title="2021-11-23 10:47:14">2021/11/23</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/23/JavaIO/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="JavaIO">JavaIO</span>
            <span class="post-date" title="2021-11-23 10:47:07">2021/11/23</span>
        </a>
        
        <a  class="All spring java "
           href="/2021/11/22/Spring%E5%B7%A5%E4%BD%9C%E5%AF%B9%E8%B1%A1/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring工作对象">Spring工作对象</span>
            <span class="post-date" title="2021-11-22 09:44:06">2021/11/22</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/18/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="Java函数式接口">Java函数式接口</span>
            <span class="post-date" title="2021-11-18 10:50:22">2021/11/18</span>
        </a>
        
        <a  class="All "
           href="/2021/11/17/SpringBoot%E5%90%AF%E5%8A%A8-%E5%9F%BA%E7%A1%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SpringBoot启动-基础">SpringBoot启动-基础</span>
            <span class="post-date" title="2021-11-17 17:01:58">2021/11/17</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/16/JRebel/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="JRebel">JRebel</span>
            <span class="post-date" title="2021-11-16 08:58:18">2021/11/16</span>
        </a>
        
        <a  class="All spring "
           href="/2021/11/11/Spring%E5%90%AF%E5%8A%A8-%E5%9F%BA%E7%A1%80/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring启动-基础">Spring启动-基础</span>
            <span class="post-date" title="2021-11-11 15:25:33">2021/11/11</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/10/%E5%8F%8D%E5%B0%84/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="反射">反射</span>
            <span class="post-date" title="2021-11-10 20:57:08">2021/11/10</span>
        </a>
        
        <a  class="All java "
           href="/2021/11/10/%E6%B3%A8%E8%A7%A3/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="注解">注解</span>
            <span class="post-date" title="2021-11-10 20:50:55">2021/11/10</span>
        </a>
        
        <a  class="All spring "
           href="/2021/11/09/SpringAOP-%E5%9F%BA%E7%A1%80/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="SpringAOP-基础">SpringAOP-基础</span>
            <span class="post-date" title="2021-11-09 10:31:31">2021/11/09</span>
        </a>
        
        <a  class="All spring "
           href="/2021/11/08/SpringIOC-%E5%9F%BA%E7%A1%80/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="SpringIOC-基础">SpringIOC-基础</span>
            <span class="post-date" title="2021-11-08 10:27:28">2021/11/08</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2021/11/02/%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80/"
           data-tag="音视频"
           data-author="" >
            <span class="post-title" title="音视频编解码技术基础">音视频编解码技术基础</span>
            <span class="post-date" title="2021-11-02 12:06:49">2021/11/02</span>
        </a>
        
        <a  class="All 数据库 "
           href="/2021/11/02/MysqlErrHosts/"
           data-tag="SQL"
           data-author="" >
            <span class="post-title" title="mysql安装时，Unable to connect to any of the specified MySQL hosts">mysql安装时，Unable to connect to any of the specified MySQL hosts</span>
            <span class="post-date" title="2021-11-02 10:58:50">2021/11/02</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2021/10/08/H264%E7%BC%96%E7%A0%81-SPSPPS/"
           data-tag="视频格式"
           data-author="" >
            <span class="post-title" title="H264编码 SPS &amp; PPS">H264编码 SPS &amp; PPS</span>
            <span class="post-date" title="2021-10-08 21:20:12">2021/10/08</span>
        </a>
        
        <a  class="All ssr "
           href="/2021/01/18/centos%E7%BB%88%E7%AB%AFssr%E9%85%8D%E7%BD%AE/"
           data-tag="ssr"
           data-author="" >
            <span class="post-title" title="centos终端ssr配置">centos终端ssr配置</span>
            <span class="post-date" title="2021-01-18 08:21:35">2021/01/18</span>
        </a>
        
        <a  class="All 数据结构 算法分析 "
           href="/2020/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E5%85%B6%E4%BA%8C/"
           data-tag="数据结构与算法分析"
           data-author="" >
            <span class="post-title" title="数据结构与算法分析阅读笔记其二">数据结构与算法分析阅读笔记其二</span>
            <span class="post-date" title="2020-12-14 22:34:39">2020/12/14</span>
        </a>
        
        <a  class="All 数据结构 算法分析 "
           href="/2020/12/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"
           data-tag="数据结构与算法分析"
           data-author="" >
            <span class="post-title" title="数据结构与算法分析阅读笔记">数据结构与算法分析阅读笔记</span>
            <span class="post-date" title="2020-12-09 21:52:40">2020/12/09</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/10/27/FLV%E6%A0%BC%E5%BC%8F/"
           data-tag="视频格式"
           data-author="" >
            <span class="post-title" title="FLV格式">FLV格式</span>
            <span class="post-date" title="2020-10-27 15:33:56">2020/10/27</span>
        </a>
        
        <a  class="All 机器学习 "
           href="/2020/09/20/Mac%E4%B8%ADPython3-x%E7%BC%96%E8%AF%91Caffe/"
           data-tag="机器学习"
           data-author="" >
            <span class="post-title" title="Mac中Python3.x编译Caffe">Mac中Python3.x编译Caffe</span>
            <span class="post-date" title="2020-09-20 01:08:09">2020/09/20</span>
        </a>
        
        <a  class="All JavaScript npm "
           href="/2020/07/17/npm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C/"
           data-tag="直播"
           data-author="" >
            <span class="post-title" title="npm常用命令操作">npm常用命令操作</span>
            <span class="post-date" title="2020-07-17 10:14:01">2020/07/17</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/07/16/MediaExtractorANDMediaMuxer/"
           data-tag="android,音频"
           data-author="" >
            <span class="post-title" title="android端的音频处理工具MediaExtractor和MediaMuxer">android端的音频处理工具MediaExtractor和MediaMuxer</span>
            <span class="post-date" title="2020-07-16 11:55:28">2020/07/16</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/07/15/AAC%E9%9F%B3%E9%A2%91%E7%A0%81%E6%B5%81/"
           data-tag="android,音频"
           data-author="" >
            <span class="post-title" title="AAC音频码流">AAC音频码流</span>
            <span class="post-date" title="2020-07-15 17:45:10">2020/07/15</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/07/15/Android-PCM%E5%A4%84%E7%90%86/"
           data-tag="android,音频"
           data-author="" >
            <span class="post-title" title="Android-PCM">Android-PCM</span>
            <span class="post-date" title="2020-07-15 13:29:49">2020/07/15</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/07/13/yuv-tool%E5%B7%A5%E5%85%B7%E7%B1%BB/"
           data-tag="android,libyuv"
           data-author="" >
            <span class="post-title" title="yuv-tool工具类">yuv-tool工具类</span>
            <span class="post-date" title="2020-07-13 22:58:21">2020/07/13</span>
        </a>
        
        <a  class="All 编译的库 "
           href="/2020/06/18/ffmpegforandroid%E7%BC%96%E8%AF%91/"
           data-tag="ffmpeg"
           data-author="" >
            <span class="post-title" title="ffmpegforandroid编译">ffmpegforandroid编译</span>
            <span class="post-date" title="2020-06-18 13:38:35">2020/06/18</span>
        </a>
        
        <a  class="All 编译的库 "
           href="/2020/06/11/libfaac%E7%BC%96%E8%AF%91/"
           data-tag="libfaac"
           data-author="" >
            <span class="post-title" title="libfaac编译">libfaac编译</span>
            <span class="post-date" title="2020-06-11 14:00:57">2020/06/11</span>
        </a>
        
        <a  class="All 编译的库 "
           href="/2020/06/11/libx264%E7%BC%96%E8%AF%91/"
           data-tag="libx264"
           data-author="" >
            <span class="post-title" title="libx264编译">libx264编译</span>
            <span class="post-date" title="2020-06-11 13:51:36">2020/06/11</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2020/06/10/RTMP%E8%A7%84%E8%8C%83%E5%AD%A6%E4%B9%A0/"
           data-tag="RTMP,直播"
           data-author="" >
            <span class="post-title" title="RTMP规范学习">RTMP规范学习</span>
            <span class="post-date" title="2020-06-10 11:35:52">2020/06/10</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2020/06/01/React-Native%E7%83%AD%E6%9B%B4%E6%96%B0/"
           data-tag="ReactNative"
           data-author="" >
            <span class="post-title" title="React-Native热更新">React-Native热更新</span>
            <span class="post-date" title="2020-06-01 16:03:28">2020/06/01</span>
        </a>
        
        <a  class="All 后台 "
           href="/2020/06/01/JavaWeb/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="JavaWeb">JavaWeb</span>
            <span class="post-date" title="2020-06-01 11:09:17">2020/06/01</span>
        </a>
        
        <a  class="All 数据库 "
           href="/2020/05/26/JDBC/"
           data-tag="java,数据库"
           data-author="" >
            <span class="post-title" title="JDBC">JDBC</span>
            <span class="post-date" title="2020-05-26 16:23:01">2020/05/26</span>
        </a>
        
        <a  class="All 后台 "
           href="/2020/03/29/%E4%BA%86%E8%A7%A3%E8%B7%A8%E5%9F%9F/"
           data-tag="后台,跨域"
           data-author="" >
            <span class="post-title" title="了解跨域">了解跨域</span>
            <span class="post-date" title="2020-03-29 21:31:15">2020/03/29</span>
        </a>
        
        <a  class="All JavaScript "
           href="/2020/03/08/JavaScript%E8%AF%AD%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="javaScript"
           data-author="" >
            <span class="post-title" title="JavaScript语法（一）">JavaScript语法（一）</span>
            <span class="post-date" title="2020-03-08 10:29:30">2020/03/08</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2020/03/06/React-native-%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/"
           data-tag="ReactNative"
           data-author="" >
            <span class="post-title" title="React-native 高德地图">React-native 高德地图</span>
            <span class="post-date" title="2020-03-06 10:07:45">2020/03/06</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2020/03/03/React-16-8-Hooks/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React 16.8 Hooks">React 16.8 Hooks</span>
            <span class="post-date" title="2020-03-03 10:07:02">2020/03/03</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2020/01/06/React-Native%E5%8E%9F%E7%94%9F%E9%80%9A%E4%BF%A1/"
           data-tag="ReactNative"
           data-author="" >
            <span class="post-title" title="React-Native原生通信">React-Native原生通信</span>
            <span class="post-date" title="2020-01-06 16:34:00">2020/01/06</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2019/12/27/React-Native%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90/"
           data-tag="ReactNative"
           data-author="" >
            <span class="post-title" title="React-Native原理浅析">React-Native原理浅析</span>
            <span class="post-date" title="2019-12-27 15:32:08">2019/12/27</span>
        </a>
        
        <a  class="All 正则表达式 "
           href="/2019/12/18/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="正则表达式"
           data-author="" >
            <span class="post-title" title="正则表达式">正则表达式</span>
            <span class="post-date" title="2019-12-18 21:45:36">2019/12/18</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2019/12/05/React-Native-%E5%8A%A8%E7%94%BB/"
           data-tag="ReactNative"
           data-author="" >
            <span class="post-title" title="React-Native-动画">React-Native-动画</span>
            <span class="post-date" title="2019-12-05 16:20:25">2019/12/05</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2019/12/03/React-%E8%87%AA%E5%AD%A6%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="React-自学之路（二）">React-自学之路（二）</span>
            <span class="post-date" title="2019-12-03 13:06:53">2019/12/03</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2019/12/03/React-%E8%87%AA%E5%AD%A6%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React-自学之路（一）">React-自学之路（一）</span>
            <span class="post-date" title="2019-12-03 09:40:28">2019/12/03</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2019/10/12/React%E6%96%B0%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"
           data-tag="react"
           data-author="" >
            <span class="post-title" title="React新的生命周期">React新的生命周期</span>
            <span class="post-date" title="2019-10-12 15:41:02">2019/10/12</span>
        </a>
        
        <a  class="All 后台 "
           href="/2019/09/18/%E5%88%9B%E5%BB%BAmaven%E9%A1%B9%E7%9B%AE%E6%97%B6%EF%BC%8C%E5%87%BA%E7%8E%B0Could-not-calculate-build-plan%E9%94%99%E8%AF%AF/"
           data-tag="springboot"
           data-author="" >
            <span class="post-title" title="创建maven项目时，出现Could not calculate build plan错误">创建maven项目时，出现Could not calculate build plan错误</span>
            <span class="post-date" title="2019-09-18 09:25:06">2019/09/18</span>
        </a>
        
        <a  class="All 数据库 "
           href="/2019/09/07/MySQL%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"
           data-tag="SQL"
           data-author="" >
            <span class="post-title" title="MySQL常用指令">MySQL常用指令</span>
            <span class="post-date" title="2019-09-07 21:10:03">2019/09/07</span>
        </a>
        
        <a  class="All Android "
           href="/2019/07/05/RecycleView%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="RecycleView（一）">RecycleView（一）</span>
            <span class="post-date" title="2019-07-05 14:03:06">2019/07/05</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/25/Android%E5%8A%A8%E7%94%BB%EF%BC%88%E4%B8%89%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android动画（三）">Android动画（三）</span>
            <span class="post-date" title="2019-06-25 14:15:26">2019/06/25</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/20/Android%E5%8A%A8%E7%94%BB%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android动画（二）">Android动画（二）</span>
            <span class="post-date" title="2019-06-20 15:10:00">2019/06/20</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/19/Android%E5%8A%A8%E7%94%BB%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android动画（一）">Android动画（一）</span>
            <span class="post-date" title="2019-06-19 15:15:56">2019/06/19</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/18/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android自定义控件（二）">Android自定义控件（二）</span>
            <span class="post-date" title="2019-06-18 13:43:11">2019/06/18</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/13/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF/"
           data-tag="Android,贝塞尔曲线"
           data-author="" >
            <span class="post-title" title="贝塞尔曲线">贝塞尔曲线</span>
            <span class="post-date" title="2019-06-13 10:14:25">2019/06/13</span>
        </a>
        
        <a  class="All Android "
           href="/2019/06/04/Java-Binder%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%90%86%E8%A7%A3/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Java Binder进程通信理解">Java Binder进程通信理解</span>
            <span class="post-date" title="2019-06-04 14:01:43">2019/06/04</span>
        </a>
        
        <a  class="All Android "
           href="/2019/05/30/arm-neon-h%E6%96%87%E4%BB%B6%E5%8A%9F%E8%83%BD/"
           data-tag="汇编"
           data-author="" >
            <span class="post-title" title="arm-neon.h文件功能">arm-neon.h文件功能</span>
            <span class="post-date" title="2019-05-30 08:45:08">2019/05/30</span>
        </a>
        
        <a  class="All Android "
           href="/2019/05/06/Handler%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6/"
           data-tag="android"
           data-author="" >
            <span class="post-title" title="Handler消息机制">Handler消息机制</span>
            <span class="post-date" title="2019-05-06 14:09:45">2019/05/06</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2019/05/06/H264%E7%BC%96%E7%A0%81-%E7%86%B5%E7%BC%96%E7%A0%81/"
           data-tag="视频格式"
           data-author="" >
            <span class="post-title" title="H264编码-熵编码">H264编码-熵编码</span>
            <span class="post-date" title="2019-05-06 13:42:57">2019/05/06</span>
        </a>
        
        <a  class="All Android "
           href="/2019/04/08/NDK%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98%E5%90%88%E9%9B%86/"
           data-tag="NDK"
           data-author="" >
            <span class="post-title" title="NDK开发问题合集">NDK开发问题合集</span>
            <span class="post-date" title="2019-04-08 10:53:30">2019/04/08</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2019/04/01/H264%E7%BC%96%E7%A0%81%E5%9F%BA%E7%A1%80/"
           data-tag="视频格式"
           data-author="" >
            <span class="post-title" title="H264编码基础">H264编码基础</span>
            <span class="post-date" title="2019-04-01 09:26:11">2019/04/01</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2019/03/31/srs%E7%9B%B4%E6%92%AD%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/"
           data-tag="直播,srs"
           data-author="" >
            <span class="post-title" title="srs直播平台搭建">srs直播平台搭建</span>
            <span class="post-date" title="2019-03-31 10:37:42">2019/03/31</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2019/03/27/%E5%9B%BE%E7%89%87RGB%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/"
           data-tag="图片格式"
           data-author="" >
            <span class="post-title" title="图片RGB数据格式">图片RGB数据格式</span>
            <span class="post-date" title="2019-03-27 22:24:49">2019/03/27</span>
        </a>
        
        <a  class="All 音视频 "
           href="/2019/03/14/%E5%9B%BE%E7%89%87YUV%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/"
           data-tag="图片格式"
           data-author="" >
            <span class="post-title" title="图片YUV数据格式">图片YUV数据格式</span>
            <span class="post-date" title="2019-03-14 11:10:16">2019/03/14</span>
        </a>
        
        <a  class="All 编译的库 "
           href="/2019/03/08/libjpeg-turbo%E7%BC%96%E8%AF%91/"
           data-tag="libjpeg-turbo"
           data-author="" >
            <span class="post-title" title="libjpeg-turbo编译">libjpeg-turbo编译</span>
            <span class="post-date" title="2019-03-08 13:41:20">2019/03/08</span>
        </a>
        
        <a  class="All 编译的库 "
           href="/2019/03/07/libYUV%E7%BC%96%E8%AF%91/"
           data-tag="libyuv"
           data-author="" >
            <span class="post-title" title="libYUV编译">libYUV编译</span>
            <span class="post-date" title="2019-03-07 15:05:11">2019/03/07</span>
        </a>
        
        <a  class="All Android "
           href="/2019/02/18/Android-camera%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="camera"
           data-author="" >
            <span class="post-title" title="Android camera（一）">Android camera（一）</span>
            <span class="post-date" title="2019-02-18 15:03:27">2019/02/18</span>
        </a>
        
        <a  class="All C/C++ "
           href="/2019/01/23/Cpp%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="Cpp"
           data-author="" >
            <span class="post-title" title="Cpp基础（一）">Cpp基础（一）</span>
            <span class="post-date" title="2019-01-23 10:52:13">2019/01/23</span>
        </a>
        
        <a  class="All C/C++ "
           href="/2019/01/18/C%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="C"
           data-author="" >
            <span class="post-title" title="C基础（一）">C基础（一）</span>
            <span class="post-date" title="2019-01-18 14:08:23">2019/01/18</span>
        </a>
        
        <a  class="All Android "
           href="/2018/12/18/EasyPermission/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="EasyPermission">EasyPermission</span>
            <span class="post-date" title="2018-12-18 13:20:30">2018/12/18</span>
        </a>
        
        <a  class="All Android "
           href="/2018/12/15/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android自定义控件（一）">Android自定义控件（一）</span>
            <span class="post-date" title="2018-12-15 21:44:34">2018/12/15</span>
        </a>
        
        <a  class="All ssr "
           href="/2018/12/10/Linux%E9%85%8D%E7%BD%AEShadowSocks-R/"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux配置ShadowSocks-R">Linux配置ShadowSocks-R</span>
            <span class="post-date" title="2018-12-10 15:58:52">2018/12/10</span>
        </a>
        
        <a  class="All Android 热更新 "
           href="/2018/10/29/Sophix%E7%83%AD%E6%9B%B4%E6%96%B0/"
           data-tag="android,热更新"
           data-author="" >
            <span class="post-title" title="Sophix热更新">Sophix热更新</span>
            <span class="post-date" title="2018-10-29 16:50:36">2018/10/29</span>
        </a>
        
        <a  class="All Android 热更新 "
           href="/2018/10/18/TinkerPatch%E7%83%AD%E6%9B%B4%E6%96%B0/"
           data-tag="android,热更新"
           data-author="" >
            <span class="post-title" title="TinkerPatch热更新">TinkerPatch热更新</span>
            <span class="post-date" title="2018-10-18 20:11:30">2018/10/18</span>
        </a>
        
        <a  class="All ReactNative "
           href="/2018/06/21/React-native-flex%E5%B8%83%E5%B1%80/"
           data-tag="react"
           data-author="" >
            <span class="post-title" title="React-native flex布局">React-native flex布局</span>
            <span class="post-date" title="2018-06-21 16:22:47">2018/06/21</span>
        </a>
        
        <a  class="All Android "
           href="/2018/01/25/Android%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91/"
           data-tag="Android"
           data-author="" >
            <span class="post-title" title="Android事件分发">Android事件分发</span>
            <span class="post-date" title="2018-01-25 16:36:52">2018/01/25</span>
        </a>
        
        <a  class="All Gradle "
           href="/2018/01/25/Gradle%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="构建工具,Gradle"
           data-author="" >
            <span class="post-title" title="Gradle（一）">Gradle（一）</span>
            <span class="post-date" title="2018-01-25 16:36:52">2018/01/25</span>
        </a>
        
        <a  class="All git "
           href="/2017/11/24/firstBlod2/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="Git详细讲解(远程)">Git详细讲解(远程)</span>
            <span class="post-date" title="2017-11-24 10:18:05">2017/11/24</span>
        </a>
        
        <a  class="All git "
           href="/2017/10/19/firstBlod/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="Git详细讲解(本地)">Git详细讲解(本地)</span>
            <span class="post-date" title="2017-10-19 21:49:28">2017/10/19</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Rust-测试" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Rust-测试</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="rust">rust</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">rust</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2021-12-15 09:06:10'>2021-12-15 14:08</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95"><span class="toc-text">一、如何编写测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E5%87%BD%E6%95%B0%E5%89%96%E6%9E%90"><span class="toc-text">测试函数剖析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-assert-%E5%AE%8F%E6%9D%A5%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%9C"><span class="toc-text">使用 assert! 宏来检查结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-assert-eq-%E5%92%8C-assert-ne-%E5%AE%8F%E6%9D%A5%E6%B5%8B%E8%AF%95%E7%9B%B8%E7%AD%89"><span class="toc-text">使用 assert_eq! 和 assert_ne! 宏来测试相等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-text">自定义错误信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-should-panic-%E6%A3%80%E6%9F%A5-panic"><span class="toc-text">使用 should_panic 检查 panic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Result%E5%9C%A8%E6%B5%8B%E8%AF%95%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">Result在测试中使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8E%A7%E5%88%B6%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C"><span class="toc-text">二、控制测试如何运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E6%88%96%E8%BF%9E%E7%BB%AD%E7%9A%84%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-text">并行或连续的运行测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%87%BD%E6%95%B0%E8%BE%93%E5%87%BA"><span class="toc-text">显示函数输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%90%8D%E7%A7%B0%E6%9D%A5%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95%E7%9A%84%E5%AD%90%E9%9B%86"><span class="toc-text">通过名称来运行测试的子集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%8D%95%E4%B8%AA%E6%B5%8B%E8%AF%95"><span class="toc-text">运行单个测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E8%BF%90%E8%A1%8C%E5%A4%9A%E4%B8%AA%E6%B5%8B%E8%AF%95"><span class="toc-text">过滤运行多个测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%A4%E9%9D%9E%E6%8C%87%E5%AE%9A%E5%90%A6%E5%88%99%E5%BF%BD%E7%95%A5%E6%9F%90%E4%BA%9B%E6%B5%8B%E8%AF%95"><span class="toc-text">除非指定否则忽略某些测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%B5%8B%E8%AF%95%E7%9A%84%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84"><span class="toc-text">三、测试的组织结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-text">单元测试</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%A8%A1%E5%9D%97%E5%92%8C-cfg-test"><span class="toc-text">测试模块和 cfg(test)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%A7%81%E6%9C%89%E5%87%BD%E6%95%B0"><span class="toc-text">测试私有函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95"><span class="toc-text">集成测试</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-text">集成测试中的子模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6-crate-%E7%9A%84%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95"><span class="toc-text">二进制 crate 的集成测试</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、如何编写测试"><a href="#一、如何编写测试" class="headerlink" title="一、如何编写测试"></a>一、如何编写测试</h2><p>测试用来验证非测试的代码是否按照期望的方式运行的 Rust 函数。测试函数体通常执行如下 三种操作:</p>
<ul>
<li><ol>
<li>设置任何所需的数据或状态 </li>
</ol>
</li>
<li><ol>
<li>运行需要测试的代码</li>
</ol>
</li>
<li><ol>
<li>断言其结果是我们所期望的</li>
</ol>
</li>
</ul>
<p>让我们看看 Rust 提供的专门用来编写测试的功能: test 属性、一些宏和 should_panic 属 性。</p>
<h3 id="测试函数剖析"><a href="#测试函数剖析" class="headerlink" title="测试函数剖析"></a>测试函数剖析</h3><p>作为最简单例子，Rust 中的测试就是一个带有 test 属性注解的函数。属性(attribute)是 关于 Rust 代码片段的元数据。<br>为了将 一个函数变成测试函数，需要在 fn 行之前加上 #[test] 。当使用 cargo test 命令运行测 试函数时，Rust 会构建一个测试执行者二进制文件用来运行标记了 test 属性的函数并报告 每一个测试是通过还是失败。</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><code class="hljs autohotkey">$ cargo <span class="hljs-keyword">new</span> adder --lib<br>     Created library `adder` project<br>$ cd adder<br></code></pre></td></tr></table></figure>
<p>首先创建一个lib。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_works</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>现在让我们暂时忽略 tests 模块和 #[cfg(test)] 注解并只关注函数来了解其如何工作。注 意 fn 行之前的 #[test] :这个属性表明这是一个测试函数，这样测试执行者就知道将其作 为测试处理。因为也可以在 tests 模块中拥有非测试的函数来帮助我们建立通用场景或进行 常见操作，所以需要使用 #[test] 属性标明哪些函数是测试。</p>
<p>函数体使用 assert_eq! 宏断言 2 加 2 等于 4。这个断言作为一个典型测试格式的例子。让 我们运行以便看到测试通过。<br>cargo test 命令会运行项目中所有的测试:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.57s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::it_works ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>Cargo 编译并运行了测试。在 Compiling 、 Finished 和 Running 这几行之后，可以看到 running 1 test 这一行。下一行显示了生成的测试函数的名称，它是 it_works ，以及测试 的运行结果， ok 。接着可以看到全体测试运行结果的总结: test result: ok. 意味着所有测试都通过了。 1 passed; 0 failed 表示通过或失败的测试数量。</p>
<p>这里并没有任何被标记为忽略的测试，所以总结表明 0 ignored 。我们也没有过滤需要运行 的测试，所以总结的结尾显示 0 filtered out 。在下一部分 “控制测试如何运行” 会讨论忽略 和过滤测试。</p>
<p>0 measured 统计是针对性能测试的。性能测试(benchmark tests)在编写本书时，仍只能 用于 Rust 开发版(nightly Rust)。</p>
<p>测试输出中以 Doc-tests adder 开头的这一部分是所有文档测试的结果。现在并没有任何文 档测试，不过 Rust 会编译任何出现在 API 文档中的代码示例。这个功能帮助我们使文档和代 码保持同步!</p>
<p>让我们改变测试的名称并看看这如何改变测试的输出。给 it_works 函数起个不同的名字， 比如 exploration ，像这样:<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">exploration</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>并再次运行 cargo test 。现在输出中将出现 exploration 而不是 it_works :<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.59s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::exploration ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure></p>
<p>让我们增加另一个测试，不过这一次是一个会失败的测试!当测试函数中出现 panic 时测试 就失败了。每一个测试都在一个新线程中运行，当主线程发现测试线程异常了，就将对应测 试标记为失败。第九章讲到了最简单的造成 panic 的方法:调用 panic! 宏。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">exploration</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>    &#125;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">another</span></span>() &#123;<br>        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;Make this test fail&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>再次 cargo test 运行测试。输出应该看起来如下所示，它表明 exploration 测试通过了而 another 失败了:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.72s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 2 tests<br><span class="hljs-keyword">test test</span>s::another ... FAILED<br><span class="hljs-keyword">test test</span>s::exploration ... ok<br><br>failures:<br><br>---- tests::another stdout ----<br>thread &#x27;main&#x27; panicked at &#x27;Make this test fail&#x27;, src/lib.rs:10:9<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br><br><br>failures:<br>    tests::another<br><br><span class="hljs-keyword">test </span>result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>test tests::another 这一行是 FAILED 而不是 ok 了。在单独测试结果和总结之间多了两 个新的部分:第一个部分显示了测试失败的详细原因。在这个例子中， another 因为panicked at ‘Make this test fail’ 而失败，这位于 src/lib.rs 的第 10 行。下一部分仅仅列 出了所有失败的测试，这在有很多测试和很多失败测试的详细输出时很有帮助。可以使用失 败测试的名称来只运行这个测试，这样比较方便调试;下一部分 “控制测试如何运行” 会讲到 更多运行测试的方法。</p>
<p>最后是总结行:总体上讲，测试结果是 FAILED 。有一个测试通过和一个测试失败。</p>
<p>现在我们见过不同场景中测试结果是什么样子的了，再来看看除 panic! 之外的一些在测试 中有帮助的宏吧。</p>
<h3 id="使用-assert-宏来检查结果"><a href="#使用-assert-宏来检查结果" class="headerlink" title="使用 assert! 宏来检查结果"></a>使用 assert! 宏来检查结果</h3><p>assert! 宏由标准库提供，在希望确保测试中一些条件为 true 时非常有用。需要向assert! 宏提供一个计算为布尔值的参数。如果值是 true ， assert! 什么也不做同时测试 会通过。如果值为 false ， assert! 调用 panic! 宏，这会导致测试失败。 assert! 宏帮 助我们检查代码是否以期望的方式运行。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rectangle</span></span> &#123;<br>    width: <span class="hljs-built_in">u32</span>,<br>    height: <span class="hljs-built_in">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> Rectangle &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">can_hold</span></span>(&amp;<span class="hljs-keyword">self</span>, other: &amp;Rectangle) -&gt; <span class="hljs-built_in">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.width &gt; other.width &amp;&amp; <span class="hljs-keyword">self</span>.height &gt; other.height<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>can_hold 方法返回一个布尔值，这意味着它完美符合 assert! 宏的使用场景。上面代码中，让我们编写一个 can_hold 方法的测试来作为练习，这里创建一个长为 8 宽为 7 的Rectangle 实例，并假设它可以放得下另一个长为 5 宽为 1 的 Rectangle 实例:<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rectangle</span></span> &#123;<br>    width: <span class="hljs-built_in">u32</span>,<br>    height: <span class="hljs-built_in">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> Rectangle &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">can_hold</span></span>(&amp;<span class="hljs-keyword">self</span>, other: &amp;Rectangle) -&gt; <span class="hljs-built_in">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.width &gt; other.width &amp;&amp; <span class="hljs-keyword">self</span>.height &gt; other.height<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">larger_can_hold_smaller</span></span>() &#123;<br>        <span class="hljs-keyword">let</span> larger = Rectangle &#123;<br>            width: <span class="hljs-number">8</span>,<br>            height: <span class="hljs-number">7</span>,<br>        &#125;;<br>        <span class="hljs-keyword">let</span> smaller = Rectangle &#123;<br>            width: <span class="hljs-number">5</span>,<br>            height: <span class="hljs-number">1</span>,<br>        &#125;;<br><br>        <span class="hljs-built_in">assert!</span>(larger.can_hold(&amp;smaller));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>注意在 tests 模块中新增加了一行: use super::*; 。 tests 是一个普通的模块，它遵循 “私有性规则” 部分介绍的常用可见性规则。因为这是一个内部模块，需要将外部模块中 被测试的代码引入到内部模块的作用域中。这里选择使用全局导入使得外部模块定义的所有 内容在 tests 模块中都是可用的。</p>
<p>我们将测试命名为 larger_can_hold_smaller ，并创建所需的两个 Rectangle 实例。接着调 用 assert! 宏并传递 larger.can_hold(&amp;smaller) 调用的结果作为参数。这个表达式预期会 返回 true ，所以测试应该通过。让我们拭目以待!<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling rectangle v0.1.0 (file:///projects/rectangle)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.66s<br>     Running unittests (target/debug/deps/rectangle<span class="hljs-string">-6584</span>c4561e48942e)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::larger_can_hold_smaller ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests rectangle<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>它确实通过了!</p>
<h3 id="使用-assert-eq-和-assert-ne-宏来测试相等"><a href="#使用-assert-eq-和-assert-ne-宏来测试相等" class="headerlink" title="使用 assert_eq! 和 assert_ne! 宏来测试相等"></a>使用 assert_eq! 和 assert_ne! 宏来测试相等</h3><p>可以通 过向 assert! 宏传递一个使用 == 运算符的表达式来做到。不过这个操作实在是太常见 了，以至于标注库提供了一对宏来更方便的处理这些操作: assert_eq! 和 assert_ne! 。这 两个宏分别比较两个值是相等还是不相等。当断言失败时他们也会打印出这两个值具体是什 么，以便于观察测试 为什么 失败，而 assert! 只会打印出它从 == 表达式中得到了 false 值，而不是导致 false 的两个值。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_two</span></span>(a: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    a + <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_adds_two</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">4</span>, add_two(<span class="hljs-number">2</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>让我们检查它是否通过！<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.58s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::it_adds_two ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>传递给 assert_eq! 宏的第一个参数，4，等于调用 add_two(2) 的结果。我们将会看到这个 测试的那一行说 test tests::it_adds_two … ok ， ok 表明测试通过了!<br>注意在一些语言和测试框架中，断言两个值相等的函数的参数叫做 expected 和 actual ，而 且指定参数的顺序是需要注意的。然而在 Rust 中，他们则叫做 left 和 right ，同时指定 期望的值和被测试代码产生的值的顺序并不重要。</p>
<p>assert_ne! 宏在传递给它的两个值不相等时通过而在相等时失败。</p>
<p>assert_eq! 和 assert_ne! 宏在底层分别使用了 == 和 != 。当断言失败时，这些宏会使 用调试格式打印出其参数，这意味着被比较的值必需实现了 PartialEq 和 Debug trait。所有 的基本类型和大部分标准库类型都实现了这些 trait。对于自定义的结构体和枚举，需要实现PartialEq 才能断言他们的值是否相等。需要实现 Debug 才能在断言失败时打印他们的值。 因为这两个 trait 都是派生 trait，通常可以直接在结构体或枚举 上添加 #[derive(PartialEq, Debug)] 注解。</p>
<h3 id="自定义错误信息"><a href="#自定义错误信息" class="headerlink" title="自定义错误信息"></a>自定义错误信息</h3><p>也可以向 assert! 、 assert_eq! 和 assert_ne! 宏传递一个可选的参数来增加用于打印的自 定义错误信息。任何在 assert! 必需的一个参数和 assert_eq! 和 assert_ne! 必需的两个 参数之后指定的参数都会传递给format! 宏，所以可以传递一个包含 {} 占位符的格式字符串和放入占位符的值。自定义信息有助于记录断言的意义，这样到测试失败 时，就能更好的理解代码出了什么问题。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greeting</span></span>(name: &amp;<span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Hello &#123;&#125;!&quot;</span>, name)<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greeting_contains_name</span></span>() &#123;<br>        <span class="hljs-keyword">let</span> result = greeting(<span class="hljs-string">&quot;Carol&quot;</span>);<br>        <span class="hljs-built_in">assert!</span>(result.contains(<span class="hljs-string">&quot;Carol&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>这个程序的需求还没有被确定，而我们非常确定问候开始的 Hello 文本不会改变。我们决定 并不想在人名改变时不得不更新测试，所以相比检查 greeting 函数返回的确切的值，我们 将仅仅断言输出的文本中包含输入参数。<br>让我们通过将 greeting 改为不包含 name 来在代码中引入一个 bug 来测试失败时是怎样 的，<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greeting</span></span>(name: &amp;<span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">String</span> &#123;<br>    <span class="hljs-built_in">String</span>::from(<span class="hljs-string">&quot;Hello!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><br>运行此测试会产生以下结果：<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling greeter v0.1.0 (file:///projects/greeter)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.91s<br>     Running unittests (target/debug/deps/greeter<span class="hljs-string">-170</span>b942eb5bf5e3a)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::greeting_contains_name ... FAILED<br><br>failures:<br><br>---- tests::greeting_contains_name stdout ----<br>thread &#x27;main&#x27; panicked at &#x27;assertion failed: result.contains(\&quot;Carol\&quot;)&#x27;, src/lib.rs:12:9<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br><br><br>failures:<br>    tests::greeting_contains_name<br><br><span class="hljs-keyword">test </span>result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>仅仅告诉了我们断言失败了和失败的行号。一个更有用的错误信息应该打印出从 greeting 函数得到的值。让我们改变测试函数来使用一个由包含占位符的格式字符串和从 greeting 函数取得的值组成的自定义错误信息:<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greeting</span></span>(name: &amp;<span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">String</span> &#123;<br>    <span class="hljs-built_in">String</span>::from(<span class="hljs-string">&quot;Hello!&quot;</span>)<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greeting_contains_name</span></span>() &#123;<br>        <span class="hljs-keyword">let</span> result = greeting(<span class="hljs-string">&quot;Carol&quot;</span>);<br>        <span class="hljs-built_in">assert!</span>(<br>            result.contains(<span class="hljs-string">&quot;Carol&quot;</span>),<br>            <span class="hljs-string">&quot;Greeting did not contain name, value was `&#123;&#125;`&quot;</span>,<br>            result<br>        );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>现在，当我们运行测试时，我们将收到一条信息更丰富的错误消息：<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling greeter v0.1.0 (file:///projects/greeter)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.93s<br>     Running unittests (target/debug/deps/greeter<span class="hljs-string">-170</span>b942eb5bf5e3a)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::greeting_contains_name ... FAILED<br><br>failures:<br><br>---- tests::greeting_contains_name stdout ----<br>thread &#x27;main&#x27; panicked at &#x27;Greeting did not contain name, value was `Hello!`&#x27;, src/lib.rs:12:9<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br><br><br>failures:<br>    tests::greeting_contains_name<br><br><span class="hljs-keyword">test </span>result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>可以在测试输出中看到所取得的确切的值，这会帮助我们理解真正发生了什么而不是期望发 生什么。</p>
<h3 id="使用-should-panic-检查-panic"><a href="#使用-should-panic-检查-panic" class="headerlink" title="使用 should_panic 检查 panic"></a>使用 should_panic 检查 panic</h3><p>除了检查代码是否返回期望的正确的值之外，检查代码是否按照期望处理错误情况也是很重 要的。<br>可以通过对函数增加另一个属性 should_panic 来实现这些。这个属性在函数中的代码 panic 时会通过，而在其中的代码没有 panic 时失败。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Guess</span></span> &#123;<br>    value: <span class="hljs-built_in">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> Guess &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new</span></span>(value: <span class="hljs-built_in">i32</span>) -&gt; Guess &#123;<br>        <span class="hljs-keyword">if</span> value &lt; <span class="hljs-number">1</span> || value &gt; <span class="hljs-number">100</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;Guess value must be between 1 and 100, got &#123;&#125;.&quot;</span>, value);<br>        &#125;<br><br>        Guess &#123; value &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-meta">#[should_panic]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greater_than_100</span></span>() &#123;<br>        Guess::new(<span class="hljs-number">200</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br><code>#[should_panic]</code> 属性位于 #[test] 之后和对应的测试函数之前。让我们看看测试通过时它是什么样子:<br><figure class="highlight cmake"><table><tr><td class="code"><pre><code class="hljs cmake">$ cargo <span class="hljs-keyword">test</span><br>   Compiling guessing_game v0.<span class="hljs-number">1.0</span> (<span class="hljs-keyword">file</span>:///projects/guessing_game)<br>    Finished <span class="hljs-keyword">test</span> [unoptimized + debuginfo] <span class="hljs-keyword">target</span>(s) in <span class="hljs-number">0.58</span>s<br>     Running unittests (<span class="hljs-keyword">target</span>/debug/deps/guessing_game-<span class="hljs-number">57</span>d70c3acb738f4d)<br><br>running <span class="hljs-number">1</span> <span class="hljs-keyword">test</span><br></code></pre></td></tr></table></figure><br>看起来不错!现在在代码中引入 bug，移除 new 函数在值大于 100 时会 panic 的条件:<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Guess</span></span> &#123;<br>    value: <span class="hljs-built_in">i32</span>,<br>&#125;<br><br><span class="hljs-comment">// --snip--</span><br><span class="hljs-keyword">impl</span> Guess &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new</span></span>(value: <span class="hljs-built_in">i32</span>) -&gt; Guess &#123;<br>        <span class="hljs-keyword">if</span> value &lt; <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;Guess value must be between 1 and 100, got &#123;&#125;.&quot;</span>, value);<br>        &#125;<br><br>        Guess &#123; value &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-meta">#[should_panic]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greater_than_100</span></span>() &#123;<br>        Guess::new(<span class="hljs-number">200</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>它会失败:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.62s<br>     Running unittests (target/debug/deps/guessing_game<span class="hljs-string">-57</span>d70c3acb738f4d)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::greater_than_100 - should panic ... FAILED<br><br>failures:<br><br>---- tests::greater_than_100 stdout ----<br>note: test did not panic as expected<br><br>failures:<br>    tests::greater_than_100<br><br><span class="hljs-keyword">test </span>result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>这回并没有得到非常有用的信息，不过一旦我们观察测试函数，会发现它标注了 #[should_panic] 。这个错误意味着代码中函数 Guess::new(200) 并没有产生 panic。</p>
<p>然而 should_panic 测试可能是非常含糊不清的，因为他们只是告诉我们代码并没有产生 panic。 should_panic 甚至在测试因为其他不同的原因而不是我们期望发生的情况而 panic 时 也会通过。为了使 should_panic 测试更精确，可以给 should_panic 属性增加一个可选的expected 参数。测试工具会确保错误信息中包含其提供的文本。</p>
<p>这个测试会通过，因为 should_panic 属性中 expected 参数提供的值是 Guess::new 函数 panic 信息的子字符串。我们可以指定期望的整个 panic 信息，在这个例子中是 Guess value must be less than or equal to 100, got 200. 。这依赖于 panic 有多独特或动态，和你希望测 试有多准确。在这个例子中，错误信息的子字符串足以确保函数在 else if value &gt; 100 的 情况下运行。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Guess</span></span> &#123;<br>    value: <span class="hljs-built_in">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> Guess &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new</span></span>(value: <span class="hljs-built_in">i32</span>) -&gt; Guess &#123;<br>        <span class="hljs-keyword">if</span> value &lt; <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<br>                <span class="hljs-string">&quot;Guess value must be less than or equal to 100, got &#123;&#125;.&quot;</span>,<br>                value<br>            );<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> value &gt; <span class="hljs-number">100</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<br>                <span class="hljs-string">&quot;Guess value must be greater than or equal to 1, got &#123;&#125;.&quot;</span>,<br>                value<br>            );<br>        &#125;<br><br>        Guess &#123; value &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-meta">#[should_panic(expected = <span class="hljs-meta-string">&quot;Guess value must be less than or equal to 100&quot;</span>)]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">greater_than_100</span></span>() &#123;<br>        Guess::new(<span class="hljs-number">200</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>这一次运行 should_panic 测试，它会失败:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.66s<br>     Running unittests (target/debug/deps/guessing_game<span class="hljs-string">-57</span>d70c3acb738f4d)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::greater_than_100 - should panic ... FAILED<br><br>failures:<br><br>---- tests::greater_than_100 stdout ----<br>thread &#x27;main&#x27; panicked at &#x27;Guess value must be greater than or equal to 1, got 200.&#x27;, src/lib.rs:13:13<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br>note: panic did not contain expected string<br>      panic message: `&quot;Guess value must be greater than or equal to 1, got 200.&quot;`,<br> expected substring: `&quot;Guess value must be less than or equal to 100&quot;`<br><br>failures:<br>    tests::greater_than_100<br><br><span class="hljs-keyword">test </span>result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>错误信息表明测试确实如期望 panic 了，不过 panic 信息是 did not include expected string ‘Guess value must be less than or equal to 100’ 。可以看到我们得到的 panic 信息，在这个 例子中是 Guess value must be greater than or equal to 1, got 200. 。这样就可以开始寻找 bug 在哪了!</p>
<h3 id="Result在测试中使用"><a href="#Result在测试中使用" class="headerlink" title="Result在测试中使用"></a>Result<T, E>在测试中使用</h3><p>到目前为止，我们已经编写了在失败时panic!的测试。我们还可以编写使用<code>Result&lt;T, E&gt;</code><br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_works</span></span>() -&gt; <span class="hljs-built_in">Result</span>&lt;(), <span class="hljs-built_in">String</span>&gt; &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-number">2</span> + <span class="hljs-number">2</span> == <span class="hljs-number">4</span> &#123;<br>            <span class="hljs-literal">Ok</span>(())<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-literal">Err</span>(<span class="hljs-built_in">String</span>::from(<span class="hljs-string">&quot;two plus two does not equal four&quot;</span>))<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>该it_works函数现在有一个返回类型，Result&lt;(), String&gt;。在函数体中没有assert_eq!，我们没有调用宏，而是Ok(())在测试通过时返回，在测试失败时返回 一个Errwith String。</p>
<p>编写测试使其返回一个Result<T, E>使您能够在测试主体中使用问号运算符，这是编写测试的便捷方法，如果其中的任何操作返回Err变体，则该测试应该失败。</p>
<p>您不能#[should_panic]在使用Result<T, E>. 相反，您应该Err在测试失败时直接返回一个值。</p>
<h2 id="二、控制测试如何运行"><a href="#二、控制测试如何运行" class="headerlink" title="二、控制测试如何运行"></a>二、控制测试如何运行</h2><p>就像 cargo run 会编译代码并运行生成的二进制文件一样， cargo test 在测试模式下编译 代码并运行生成的测试二进制文件。可以指定命令行参数来改变 cargo test 的默认行为。<br>例如， cargo test 生成的二进制文件的默认行为是并行的运行所有测试，并捕获测试运行过 程中产生的输出避免他们被显示出来，使得阅读测试结果相关的内容变得更容易。</p>
<p>这些选项的一部分可以传递给 cargo test ，而另一些则需要传递给生成的测试二进制文件。 为了分隔两种类型的参数，首先列出传递给 cargo test 的参数，接着是分隔符 — ，再之 后是传递给测试二进制文件的参数。运行 cargo test —help 会告诉你 cargo test 的相关 参数，而运行 cargo test — —help 则会告诉你位于分隔符 — 之后的相关参数。</p>
<h3 id="并行或连续的运行测试"><a href="#并行或连续的运行测试" class="headerlink" title="并行或连续的运行测试"></a>并行或连续的运行测试</h3><p>当运行多个测试时，他们默认使用线程来并行的运行。这意味着测试会更快的运行完毕，所 以可以更快的得到代码能否工作的反馈。因为测试是在同时运行的，你应该小心测试不能相 互依赖或依赖任何共享状态，这包括类似于当前工作目录或者环境变量这样的共享环境。</p>
<p>例如，每一个测试都运行一些代码在硬盘上创建一个 test-output.txt 文件并写入一些数 据。接着每一个测试都读取文件中的数据并断言这个文件包含特定的值，而这个值在每个测 试中都是不同的。因为所有测试都是同时运行的，一个测试可能会在另一个测试读写文件过 程中覆盖了文件。那么第二个测试就会失败，并不是因为代码不正确，而是因为测试并行运 行时相互干涉。一个解决方案是使每一个测试读写不同的文件;另一个是一次运行一个测 试。</p>
<p>如果你不希望测试并行运行，或者想要更加精确的控制使用线程的数量，可以传递 —test- threads 参数和希望使用线程的数量给测试二进制文件。例如:<br><figure class="highlight brainfuck"><table><tr><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">$</span> <span class="hljs-comment">cargo</span> <span class="hljs-comment">test</span> -- --<span class="hljs-comment">test</span><span class="hljs-literal">-</span><span class="hljs-comment">threads=1</span><br></code></pre></td></tr></table></figure><br>这里将测试线程设置为 1，告诉程序不要使用任何并行机制。这也会比并行运行花费更多时 间，不过测试就不会在存在共享状态时潜在的相互干涉了。</p>
<h3 id="显示函数输出"><a href="#显示函数输出" class="headerlink" title="显示函数输出"></a>显示函数输出</h3><p>如果测试通过了，Rust 的测试库默认会捕获打印到标准输出的任何内容。例如，如果在测试 中调用 println! 而测试通过了，我们将不会在终端看到 println! 的输出:只会看到说明 测试通过的行。如果测试失败了，就会看到所有标准输出和其他错误信息。</p>
<p>有一个无意义的函数它打印出其参数的值并接着返回 10。接着还有一个会 通过的测试和一个会失败的测试:<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">prints_and_returns_10</span></span>(a: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I got the value &#123;&#125;&quot;</span>, a);<br>    <span class="hljs-number">10</span><br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">this_test_will_pass</span></span>() &#123;<br>        <span class="hljs-keyword">let</span> value = prints_and_returns_10(<span class="hljs-number">4</span>);<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">10</span>, value);<br>    &#125;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">this_test_will_fail</span></span>() &#123;<br>        <span class="hljs-keyword">let</span> value = prints_and_returns_10(<span class="hljs-number">8</span>);<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, value);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>当我们使用 运行这些测试时cargo test，我们将看到以下输出：<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling silly-function v0.1.0 (file:///projects/silly-function)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.58s<br>     Running unittests (target/debug/deps/silly_function<span class="hljs-string">-160869</span>f38cff9166)<br><br>running 2 tests<br><span class="hljs-keyword">test test</span>s::this_test_will_fail ... FAILED<br><span class="hljs-keyword">test test</span>s::this_test_will_pass ... ok<br><br>failures:<br><br>---- tests::this_test_will_fail stdout ----<br>I got the value 8<br>thread &#x27;main&#x27; panicked at &#x27;assertion failed: `(left == right)`<br>  left: `5`,<br> right: `10`&#x27;, src/lib.rs:19:9<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br><br><br>failures:<br>    tests::this_test_will_fail<br><br><span class="hljs-keyword">test </span>result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure><br>注意输出中哪里也不会出现 I got the value 4 ，这是当测试通过时打印的内容。这些输出被 捕获。失败测试的输出， I got the value 8 ，则出现在输出的测试总结部分，同时也显示了 测试失败的原因。</p>
<p>如果你希望也能看到通过的测试中打印的值，捕获输出的行为可以通过 —nocapture 参数来 禁用:<br><figure class="highlight brainfuck"><table><tr><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">$</span> <span class="hljs-comment">cargo</span> <span class="hljs-comment">test</span> -- --<span class="hljs-comment">show</span><span class="hljs-literal">-</span><span class="hljs-comment">output</span><br></code></pre></td></tr></table></figure><br>当我们再次使用—show-output标记运行示例 11-10 中的测试时，我们看到以下输出：<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test -- --show-output<br>   Compiling silly-function v0.1.0 (file:///projects/silly-function)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.60s<br>     Running unittests (target/debug/deps/silly_function<span class="hljs-string">-160869</span>f38cff9166)<br><br>running 2 tests<br><span class="hljs-keyword">test test</span>s::this_test_will_fail ... FAILED<br><span class="hljs-keyword">test test</span>s::this_test_will_pass ... ok<br><br>successes:<br><br>---- tests::this_test_will_pass stdout ----<br>I got the value 4<br><br><br>successes:<br>    tests::this_test_will_pass<br><br>failures:<br><br>---- tests::this_test_will_fail stdout ----<br>I got the value 8<br>thread &#x27;main&#x27; panicked at &#x27;assertion failed: `(left == right)`<br>  left: `5`,<br> right: `10`&#x27;, src/lib.rs:19:9<br>note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace<br><br><br>failures:<br>    tests::this_test_will_fail<br><br><span class="hljs-keyword">test </span>result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br><span class="hljs-keyword">error: test</span> failed, to rerun pass &#x27;--lib&#x27;<br></code></pre></td></tr></table></figure></p>
<h3 id="通过名称来运行测试的子集"><a href="#通过名称来运行测试的子集" class="headerlink" title="通过名称来运行测试的子集"></a>通过名称来运行测试的子集</h3><p>有时运行整个测试集会耗费很长时间。如果你负责特定位置的代码，你可能会希望只运行这 些代码相关的测试。可以向 cargo test 传递希望运行的测试的(部分)名称作为参数来选 择运行哪些测试。</p>
<p>为了演示如何运行测试的子集，我们将为我们的add_two函数创建三个测试 ，<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_two</span></span>(a: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    a + <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_two_and_two</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">4</span>, add_two(<span class="hljs-number">2</span>));<br>    &#125;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_three_and_two</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, add_two(<span class="hljs-number">3</span>));<br>    &#125;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">one_hundred</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">102</span>, add_two(<span class="hljs-number">100</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>如果我们在不传递任何参数的情况下运行测试，正如我们之前看到的，所有测试将并行运行：<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.62s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 3 tests<br><span class="hljs-keyword">test test</span>s::add_three_and_two ... ok<br><span class="hljs-keyword">test test</span>s::add_two_and_two ... ok<br><span class="hljs-keyword">test test</span>s::one_hundred ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure></p>
<h3 id="运行单个测试"><a href="#运行单个测试" class="headerlink" title="运行单个测试"></a>运行单个测试</h3><p>可以向 cargo test 传递任意测试的名称来只运行这个测试:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test one_hundred<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.69s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::one_hundred ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>只有名称为 one_hundred 的测试被运行了;其余两个测试并不匹配这个名称。测试输出在总 结行的结尾显示了 2 filtered out 表明存在比本命令所运行的更多的测试。<br>不能像这样指定多个测试名称，只有传递给 cargo test 的第一个值才会被使用。不过有运 行多个测试的方法。</p>
<h3 id="过滤运行多个测试"><a href="#过滤运行多个测试" class="headerlink" title="过滤运行多个测试"></a>过滤运行多个测试</h3><p>然而，可以指定测试的部分名称，这样任何名称匹配这个值的测试会被运行。例如，因为头两个测试的名称包含 add ，可以通过 cargo test add 来运行这两个测试:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test add<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.61s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 2 tests<br><span class="hljs-keyword">test test</span>s::add_three_and_two ... ok<br><span class="hljs-keyword">test test</span>s::add_two_and_two ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>这运行了所有名字中带有 add 的测试。同时注意测试所在的模块作为测试名称的一部分，所 以可以通过模块名来过滤运行一个模块中的所有测试。</p>
<h3 id="除非指定否则忽略某些测试"><a href="#除非指定否则忽略某些测试" class="headerlink" title="除非指定否则忽略某些测试"></a>除非指定否则忽略某些测试</h3><p>有时一些特定的测试执行起来是非常耗费时间的，所以在大多数运行 cargo test 的时候希 望能排除他们。与其通过参数列举出所有希望运行的测试，也可以使用 ignore 属性来标记 耗时的测试并排除他们，如下所示:<br><figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#[test]</span><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_works</span>(<span class="hljs-params"></span>) </span>&#123;<br>    assert_eq!(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>&#125;<br><br><span class="hljs-comment">#[test]</span><br><span class="hljs-comment">#[ignore]</span><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">expensive_test</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// code that takes an hour to run</span><br>&#125;<br></code></pre></td></tr></table></figure><br>对想要排除的测试的 #[test] 之后增加了 #[ignore] 行。现在如果运行测试，就会发现 it_works 运行了，而 expensive_test 没有运行:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.60s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 2 tests<br><span class="hljs-keyword">test </span>expensive_test ... ignored<br><span class="hljs-keyword">test </span>it_works ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>expensive_test 被列为 ignored ，如果只希望运行被忽略的测试，可以使用 cargo test — —ignored :<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test -- --ignored<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.61s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test </span>expensive_test ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>通过控制运行哪些测试，可以确保运行 cargo test 的结果是快速的。当某个时刻需要检查 ignored 测试的结果而且你也有时间等待这个结果的话，可以选择执行 cargo test — —ignored 。</p>
<h2 id="三、测试的组织结构"><a href="#三、测试的组织结构" class="headerlink" title="三、测试的组织结构"></a>三、测试的组织结构</h2><p>正如之前提到的，测试是一个复杂的概念，而且不同的开发者也采用不同的技术和组织。 Rust 社区倾向于根据测试的两个主要分类来考虑问题:单元测试(unit tests)与 集成测试 (integration tests)。单元测试倾向于更小而更专注，在隔离的环境中一次测试一个模块， 也可以测试私有接口。集成测试对于你的库来说则完全是外部的。他们与其他用户采用相同 的方式使用你的代码，他们只针对公有接口而且每个测试都会测试多个模块。</p>
<p>编写这两类测试对于从独立和整体的角度保证你的库符合期望是非常重要的。</p>
<h3 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h3><p>单元测试的目的是在与其他部分隔离的环境中测试每一个单元的代码，以便于快速而准确的 定位代码位于何处和是否符合预期。单元测试位于 src 目录中，与他们要测试的代码存在于相 同的文件中。传统做法是在每个文件中创建包含测试函数的 tests 模块，并使用 cfg(test) 标注模块。</p>
<h6 id="测试模块和-cfg-test"><a href="#测试模块和-cfg-test" class="headerlink" title="测试模块和 cfg(test)"></a>测试模块和 cfg(test)</h6><p>测试模块的 #[cfg(test)] 注解告诉 Rust 只在执行 cargo test 时才编译和运行测试代码， 而在运行 cargo build 时不这么做。这在只希望构建库的时候可以节省编译时间，并能节省 编译产物的空间因为他们并没有包含测试。我们将会看到因为集成测试位于另一个文件夹， 他们并不需要 #[cfg(test)] 注解。但是因为单元测试位于与源码相同的文件中，所以使用#[cfg(test)] 来指定他们不应该被包含进编译结果中。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_works</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2</span> + <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>这里自动生成了测试模块。 cfg 属性代表 configuration ，它告诉 Rust 其之后的项只被包含 进特定配置中。在这个例子中，配置是 test ，Rust 所提供的用于编译和运行测试的配置。 通过使用这个属性，Cargo 只会在我们主动使用 cargo test 运行测试时才编译测试代码。 除了标注为 #[test] 的函数之外，还包括测试模块中可能存在的帮助函数。</p>
<h6 id="测试私有函数"><a href="#测试私有函数" class="headerlink" title="测试私有函数"></a>测试私有函数</h6><p>测试社区中一直存在关于是否应该对私有函数进行单元测试的论战，而其他语言中难以甚至 不可能测试私有函数。不过无论你坚持哪种测试意识形态，Rust 的私有性规则确实允许你测 试私有函数，由于私有性规则。<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_two</span></span>(a: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    internal_adder(a, <span class="hljs-number">2</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">internal_adder</span></span>(a: <span class="hljs-built_in">i32</span>, b: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    a + b<br>&#125;<br><br><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">internal</span></span>() &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">4</span>, internal_adder(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><br>注意 internal_adder 函数并没有标记为 pub ，不过因为测试也不过是 Rust 代码同时tests 也仅仅是另一个模块，我们完全可以在测试中导入和调用 internal_adder 。如果你并不认为私有函数应该被测试，Rust 也不会强迫你这么做。</p>
<h6 id="集成测试"><a href="#集成测试" class="headerlink" title="集成测试"></a>集成测试</h6><p>在 Rust 中，集成测试对于需要测试的库来完全说是外部的。他们同其他代码一样使用库文 件，这意味着他们只能调用作为库公有 API 的一部分函数。他们的目的是测试库的多个部分 能否一起正常工作。每个能单独正确运行的代码单元集成在一起也可能会出现问题，所以集 成测试的覆盖率也是很重要的。为了创建集成测试，首先需要一个 tests 目录。</p>
<p><strong><em>tests 目录</em></strong><br>为了编写集成测试，需要在项目根目录创建一个 tests 目录，与 src 同级。Cargo 知道如何去 寻找这个目录中的集成测试文件。接着可以随意在这个目录中创建任意多的测试文件，Cargo 会将每一个文件当作单独的 crate 来编译。<br>让我们来创建一个集成测试!<br>tests/integration_test.rs<br><figure class="highlight php"><table><tr><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">adder</span>;<br><br><span class="hljs-comment">#[test]</span><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_adds_two</span>(<span class="hljs-params"></span>) </span>&#123;<br>    assert_eq!(<span class="hljs-number">4</span>, adder::add_two(<span class="hljs-number">2</span>));<br>&#125;<br></code></pre></td></tr></table></figure><br>我们在顶部增加了 use adder ，这在单元测试中是不需要的。这是因为每一个tests 目录中的测试文件都是完全独立的 crate，所以需要在每一个文件中导入库。这里的adder 是项目名称。</p>
<p>并不需要将 tests/integration_test.rs 中的任何代码标注为 #[cfg(test)] 。Cargo 对 tests 文件夹特殊处理并只会在运行 cargo test 时编译这个目录中的文件。现在就运行 cargo test 试试:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 1.31s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-1082</span>c4b063a8fbe6)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::internal ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>     Running tests/integration_test.rs (target/debug/deps/integration_test<span class="hljs-string">-1082</span>c4b063a8fbe6)<br><br>running 1 test<br><span class="hljs-keyword">test </span>it_adds_two ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>现在有了三个部分的输出:单元测试、集成测试和文档测试。</p>
<p>我们仍然可以通过指定测试函数的名称作为 cargo test 的参数来运行特定集成测试。为了 运行某个特定集成测试文件中的所有测试，使用 cargo test 的 —test 后跟文件的名称:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test --test integration_test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.64s<br>     Running tests/integration_test.rs (target/debug/deps/integration_test<span class="hljs-string">-82</span>e7799c1bc62298)<br><br>running 1 test<br><span class="hljs-keyword">test </span>it_adds_two ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>此命令仅运行tests/integration_test.rs文件中的测试。</p>
<h6 id="集成测试中的子模块"><a href="#集成测试中的子模块" class="headerlink" title="集成测试中的子模块"></a>集成测试中的子模块</h6><p>随着集成测试的增加，你可能希望在 tests 目录增加更多文件辅助组织他们，例如根据测试 的功能来将测试分组。正如我们之前提到的，每一个 tests 目录中的文件都被编译为单独的 crate。<br>将每个集成测试文件当作其自己的 crate 来对待有助于创建更类似与终端用户使用 crate 那样 的单独的作用域。</p>
<p>tests/common.rs<br><figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">pub fn <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// setup code specific to your library&#x27;s tests would go here</span><br>&#125;<br></code></pre></td></tr></table></figure><br>如果再次运行测试，将会在测试结果中看到一个对应 common.rs 文件的新部分，即便这个文 件并没有包含任何测试函数，或者没有任何地方调用了 setup 函数:<br><figure class="highlight subunit"><table><tr><td class="code"><pre><code class="hljs subunit">$ cargo test<br>   Compiling adder v0.1.0 (file:///projects/adder)<br>    Finished test [unoptimized + debuginfo] target(s) in 0.89s<br>     Running unittests (target/debug/deps/adder<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test test</span>s::internal ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>     Running tests/common.rs (target/debug/deps/common<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>     Running tests/integration_test.rs (target/debug/deps/integration_test<span class="hljs-string">-92948</span>b65e88960b4)<br><br>running 1 test<br><span class="hljs-keyword">test </span>it_adds_two ... ok<br><br><span class="hljs-keyword">test </span>result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br><br>   Doc-tests adder<br><br>running 0 tests<br><br><span class="hljs-keyword">test </span>result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s<br></code></pre></td></tr></table></figure><br>common 出现在测试结果中并显示 running 0 tests ，这不是我们想要的;我们只是希望能够 在其他集成测试文件中分享一些代码罢了。</p>
<p>为了避免 common 出现在测试输出中，不同于创建 tests/common.rs，我们将创建 tests/common/mod.rs。以这种方式命名文件告诉 Rust 不要将common模块视为集成测试文件。当我们将setup函数代码移动到tests/common/mod.rs中并删除 tests/common.rs文件时，测试输出中的部分将不再出现。测试目录子目录中的文件不会被编译为单独的板条箱，也不会在测试输出中包含部分。</p>
<p>一旦拥有了 tests/common/mod.rs，就可以将其作为模块来在任何集成测试文件中使用。这里 是一个 tests/integration_test.rs 中调用 setup 函数的 it_adds_two 测试的例子:<br>tests/integration_test.rs<br><figure class="highlight rust"><table><tr><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> adder;<br><br><span class="hljs-keyword">mod</span> common;<br><br><span class="hljs-meta">#[test]</span><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">it_adds_two</span></span>() &#123;<br>    common::setup();<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">4</span>, adder::add_two(<span class="hljs-number">2</span>));<br>&#125;<br></code></pre></td></tr></table></figure></p>
<h6 id="二进制-crate-的集成测试"><a href="#二进制-crate-的集成测试" class="headerlink" title="二进制 crate 的集成测试"></a>二进制 crate 的集成测试</h6><p>如果项目是二进制 crate 并且只包含 src/main.rs 而没有 src/lib.rs，这样就不可能在 tests 创建 集成测试并使用 use 导入 src/main.rs 中的函数了。只有库 crate 向其他 crate 暴露 了可供调用和使用的函数;二进制 crate 只意在单独运行。<br>这也是 Rust 二进制项目明确采用 src/main.rs 调用 src/lib.rs 中逻辑这样的结构的原因之一。 通过这种结构，集成测试 就可以 使用 use 测试库 crate 中的主要功能了，而如果 这些重要的功能没有问题的话，src/main.rs 中的少量代码也就会正常工作且不需要测试。</p>

      
       
    </div>
</article>





    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '07584e1e38d09c739a16',
            clientSecret: '6a466750b46c76ed9cc8ee0fe0d78e0c33898937',
            repo: 'yangandmore.github.io',
            owner: 'Yangandmore',
            admin: ['Yangandmore'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 Yangandmore
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
